version: 2

models:
  - name: stg_hourly_campaign_performance
    description: |
      Staging model for hourly campaign performance data.
      Simple pass-through of raw data from campaign_performance seed.
      All calculated metrics are handled in the intermediate layer.

    config:
      strict_mode: false

    columns:
      # Essential tests only - detailed documentation in intermediate layer
      - name: id
        description: Surrogate primary key per row
        tests: [not_null, unique]

      - name: campaign_id
        description: Campaign identifier
        tests: [not_null]

      - name: hour_ts
        description: Hour timestamp for the metrics
        tests: [not_null]

      - name: impressions
        description: Total impressions
        tests: [not_null]

      - name: clicks
        description: Total clicks
        tests: [not_null]

      - name: video_start
        description: Count of video starts
        tests: [not_null]

      - name: video_q25
        description: Video at 25%
        tests: [not_null]

      - name: video_q50
        description: Video at 50%
        tests: [not_null]

      - name: video_q75
        description: Video at 75%
        tests: [not_null]

      - name: video_q100
        description: Video at 100%
        tests: [not_null]

      - name: frequency
        description: Average frequency per reached user
        tests: [not_null]

      - name: reach
        description: Estimated unique reach
        tests: [not_null]

      - name: skips
        description: Skip events
        tests: [not_null]

      - name: qr_scans
        description: QR scan events
        tests: [not_null]

      - name: interactive_engagements
        description: Interactive engagement events
        tests: [not_null]

      - name: spend
        description: Spend amount (integer units)
        tests: [not_null]

      - name: requests
        description: Total ad requests
        tests: [not_null]

      - name: responses
        description: Total ad responses
        tests: [not_null]

      - name: eligible_impressions
        description: Eligible impressions
        tests: [not_null]

      - name: auctions_won
        description: Auctions won
        tests: [not_null]

      - name: viewable_impressions
        description: Viewable impressions
        tests: [not_null]

      - name: audible_impressions
        description: Audible impressions
        tests: [not_null]

      - name: error_count
        description: Error count
        tests: [not_null]

      - name: timeout_count
        description: Timeout error count
        tests: [not_null]

      - name: human_readable
        description: Human-readable timestamp string
        tests: [not_null]

      - name: hour_of_day
        description: Hour component (0-23)
        tests: [not_null]

      - name: minute_of_hour
        description: Minute component (0-59)
        tests: [not_null]

      - name: second_of_minute
        description: Second component (0-59)
        tests: [not_null]

      - name: day_of_week
        description: Day of week (0-6)
        tests: [not_null]

      - name: is_business_hour
        description: Flag if inside business hours
        tests: [not_null]

      - name: daily_day_date
        description: Date of the hour_ts
        tests: [not_null]

      - name: weekly_start_day_date
        description: First day of week containing hour_ts
        tests: [not_null]

      - name: monthly_start_day_date
        description: First day of month containing hour_ts
        tests: [not_null]

      - name: audience_json
        description: JSON blob of audience breakdowns
